<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" font-family="'Segoe UI', system-ui, -apple-system, sans-serif">
  <defs>
    <linearGradient id="bgGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#0d1117"/>
      <stop offset="100%" stop-color="#161b22"/>
    </linearGradient>
    <marker id="arrowGreen" markerWidth="12" markerHeight="10" refX="11" refY="5" orient="auto"><path d="M0,0 L12,5 L0,10 L3,5Z" fill="#4ade80"/></marker>
    <marker id="arrowBlue" markerWidth="12" markerHeight="10" refX="11" refY="5" orient="auto"><path d="M0,0 L12,5 L0,10 L3,5Z" fill="#60a5fa"/></marker>
    <marker id="arrowAmber" markerWidth="12" markerHeight="10" refX="11" refY="5" orient="auto"><path d="M0,0 L12,5 L0,10 L3,5Z" fill="#fbbf24"/></marker>
    <marker id="arrowCyan" markerWidth="12" markerHeight="10" refX="11" refY="5" orient="auto"><path d="M0,0 L12,5 L0,10 L3,5Z" fill="#22d3ee"/></marker>
    <marker id="arrowPurple" markerWidth="12" markerHeight="10" refX="11" refY="5" orient="auto"><path d="M0,0 L12,5 L0,10 L3,5Z" fill="#c084fc"/></marker>
    <marker id="arrowOrange" markerWidth="12" markerHeight="10" refX="11" refY="5" orient="auto"><path d="M0,0 L12,5 L0,10 L3,5Z" fill="#fb923c"/></marker>
  </defs>

  <rect width="1200" height="900" rx="12" fill="url(#bgGrad)"/>

  <text x="600" y="42" text-anchor="middle" fill="#f0f6fc" font-size="26" font-weight="700">Showers Auto Detail Architecture</text>
  <text x="600" y="68" text-anchor="middle" fill="#9198a1" font-size="14">Astro + React frontend — Node.js API — Square payments — PostgreSQL</text>

  <!-- ═══ TOP: Client Layer ═══ -->
  <rect x="30" y="90" width="1140" height="100" rx="12" fill="#1c2333" stroke="#fb923c" stroke-width="2"/>
  <text x="600" y="118" text-anchor="middle" fill="#fb923c" font-size="18" font-weight="700">Client Layer</text>

  <rect x="50" y="132" width="170" height="42" rx="8" fill="#1e293b" stroke="#fb923c" stroke-width="1.2"/>
  <text x="135" y="159" text-anchor="middle" fill="#fdba74" font-size="13" font-weight="600">Desktop Browser</text>

  <rect x="235" y="132" width="170" height="42" rx="8" fill="#1e293b" stroke="#fb923c" stroke-width="1.2"/>
  <text x="320" y="159" text-anchor="middle" fill="#fdba74" font-size="13" font-weight="600">Mobile Browser</text>

  <rect x="420" y="132" width="170" height="42" rx="8" fill="#1e293b" stroke="#4ade80" stroke-width="1.2"/>
  <text x="505" y="159" text-anchor="middle" fill="#86efac" font-size="13" font-weight="600">Google Search</text>

  <rect x="605" y="132" width="170" height="42" rx="8" fill="#1e293b" stroke="#60a5fa" stroke-width="1.2"/>
  <text x="690" y="159" text-anchor="middle" fill="#93c5fd" font-size="13" font-weight="600">Square Payments</text>

  <rect x="790" y="132" width="170" height="42" rx="8" fill="#1e293b" stroke="#22d3ee" stroke-width="1.2"/>
  <text x="875" y="159" text-anchor="middle" fill="#67e8f9" font-size="13" font-weight="600">Google Places</text>

  <rect x="975" y="132" width="185" height="42" rx="8" fill="#1e293b" stroke="#c084fc" stroke-width="1.2"/>
  <text x="1067" y="159" text-anchor="middle" fill="#d8b4fe" font-size="13" font-weight="600">Admin Portal</text>

  <!-- Arrows -->
  <path d="M300,190 L300,220" stroke="#fb923c" stroke-width="3" marker-end="url(#arrowOrange)" fill="none"/>
  <path d="M900,190 L900,220" stroke="#c084fc" stroke-width="3" marker-end="url(#arrowPurple)" fill="none"/>

  <!-- ═══ MIDDLE-LEFT: Astro Frontend ═══ -->
  <rect x="30" y="220" width="560" height="310" rx="12" fill="#1c2333" stroke="#22d3ee" stroke-width="2"/>
  <text x="310" y="248" text-anchor="middle" fill="#67e8f9" font-size="18" font-weight="700">Astro Frontend (SSG)</text>

  <!-- Public Pages -->
  <rect x="50" y="264" width="255" height="120" rx="8" fill="#0d1b2a" stroke="#22d3ee" stroke-width="1.2"/>
  <text x="177" y="288" text-anchor="middle" fill="#67e8f9" font-size="14" font-weight="600">Public Pages</text>
  <text x="70" y="310" fill="#c9d1d9" font-size="12">index.astro — Landing / hero</text>
  <text x="70" y="330" fill="#c9d1d9" font-size="12">services.astro — Service catalog</text>
  <text x="70" y="350" fill="#c9d1d9" font-size="12">pay.astro — Customer payment</text>
  <text x="70" y="370" fill="#c9d1d9" font-size="12">book.astro — Booking flow</text>

  <!-- React Islands -->
  <rect x="320" y="264" width="255" height="120" rx="8" fill="#0d1b2a" stroke="#60a5fa" stroke-width="1.2"/>
  <text x="447" y="288" text-anchor="middle" fill="#93c5fd" font-size="14" font-weight="600">React Islands</text>
  <text x="340" y="310" fill="#c9d1d9" font-size="12">QuoteCalculator — Live pricing</text>
  <text x="340" y="330" fill="#c9d1d9" font-size="12">ReviewsSection — Google reviews</text>
  <text x="340" y="350" fill="#c9d1d9" font-size="12">GallerySectionClient — Before/After</text>
  <text x="340" y="370" fill="#c9d1d9" font-size="12">ServiceAreaMap — Coverage zone</text>

  <!-- Admin Pages -->
  <rect x="50" y="396" width="255" height="120" rx="8" fill="#0d1b2a" stroke="#c084fc" stroke-width="1.2"/>
  <text x="177" y="420" text-anchor="middle" fill="#d8b4fe" font-size="14" font-weight="600">Admin Dashboard (/manage)</text>
  <text x="70" y="442" fill="#c9d1d9" font-size="12">index.astro — Dashboard overview</text>
  <text x="70" y="462" fill="#c9d1d9" font-size="12">login.astro — JWT auth + 2FA</text>
  <text x="70" y="482" fill="#c9d1d9" font-size="12">settings.astro — TOTP setup</text>
  <text x="70" y="502" fill="#c9d1d9" font-size="12">gallery.astro — Image management</text>

  <!-- SEO -->
  <rect x="320" y="396" width="255" height="120" rx="8" fill="#0d1b2a" stroke="#4ade80" stroke-width="1.2"/>
  <text x="447" y="420" text-anchor="middle" fill="#86efac" font-size="14" font-weight="600">SEO / Schema.org</text>
  <text x="340" y="442" fill="#c9d1d9" font-size="12">LocalBusinessSchema</text>
  <text x="340" y="462" fill="#c9d1d9" font-size="12">ServiceSchema</text>
  <text x="340" y="482" fill="#c9d1d9" font-size="12">ReviewSchema</text>
  <text x="340" y="502" fill="#c9d1d9" font-size="12">FAQSchema + BreadcrumbSchema</text>

  <!-- Arrow: Frontend → Backend -->
  <path d="M590,400 L610,400" stroke="#fbbf24" stroke-width="3" marker-end="url(#arrowAmber)" fill="none"/>
  <text x="600" y="392" fill="#fbbf24" font-size="12" font-weight="700">REST</text>

  <!-- ═══ MIDDLE-RIGHT: Node.js Backend ═══ -->
  <rect x="610" y="220" width="560" height="310" rx="12" fill="#1c2333" stroke="#fbbf24" stroke-width="2"/>
  <text x="890" y="248" text-anchor="middle" fill="#fbbf24" font-size="18" font-weight="700">Node.js API (Express)</text>

  <!-- API Routes -->
  <rect x="630" y="264" width="250" height="250" rx="8" fill="#0d1b2a" stroke="#fbbf24" stroke-width="1.2"/>
  <text x="755" y="288" text-anchor="middle" fill="#fbbf24" font-size="14" font-weight="600">API Routes (/api)</text>
  <text x="650" y="310" fill="#c9d1d9" font-size="12">/bookings — CRUD + availability</text>
  <text x="650" y="330" fill="#c9d1d9" font-size="12">/payments — Square deposits</text>
  <text x="650" y="350" fill="#c9d1d9" font-size="12">/quotes — Price calculation</text>
  <text x="650" y="370" fill="#c9d1d9" font-size="12">/reviews — Customer feedback</text>
  <text x="650" y="390" fill="#c9d1d9" font-size="12">/gallery — Image uploads</text>
  <text x="650" y="410" fill="#c9d1d9" font-size="12">/packages — Service packages</text>
  <text x="650" y="430" fill="#c9d1d9" font-size="12">/addons — Add-on services</text>
  <text x="650" y="450" fill="#c9d1d9" font-size="12">/coupons — Discount codes</text>
  <text x="650" y="470" fill="#c9d1d9" font-size="12">/auth — Login + 2FA (TOTP)</text>
  <text x="650" y="490" fill="#c9d1d9" font-size="12">/google-reviews — Places sync</text>

  <!-- Middleware -->
  <rect x="895" y="264" width="260" height="120" rx="8" fill="#0d1b2a" stroke="#f87171" stroke-width="1.2"/>
  <text x="1025" y="288" text-anchor="middle" fill="#fca5a5" font-size="14" font-weight="600">Middleware</text>
  <text x="915" y="310" fill="#c9d1d9" font-size="12">auth.js — JWT verification</text>
  <text x="915" y="330" fill="#c9d1d9" font-size="12">rateLimiter.js — Rate limiting</text>
  <text x="915" y="350" fill="#c9d1d9" font-size="12">validators.js — Input sanitize</text>
  <text x="915" y="370" fill="#c9d1d9" font-size="12">cors / helmet / compression</text>

  <!-- External Services -->
  <rect x="895" y="396" width="260" height="120" rx="8" fill="#0d1b2a" stroke="#22d3ee" stroke-width="1.2"/>
  <text x="1025" y="420" text-anchor="middle" fill="#67e8f9" font-size="14" font-weight="600">External Services</text>
  <text x="915" y="442" fill="#c9d1d9" font-size="12">Square SDK — Payments</text>
  <text x="915" y="462" fill="#c9d1d9" font-size="12">Google Places — Review sync</text>
  <text x="915" y="482" fill="#c9d1d9" font-size="12">Nodemailer — Email alerts</text>
  <text x="915" y="502" fill="#c9d1d9" font-size="12">speakeasy — TOTP 2FA</text>

  <!-- Arrows to data -->
  <path d="M400,530 L400,560" stroke="#4ade80" stroke-width="3" marker-end="url(#arrowGreen)" fill="none"/>
  <path d="M800,530 L800,560" stroke="#4ade80" stroke-width="3" marker-end="url(#arrowGreen)" fill="none"/>

  <!-- ═══ BOTTOM: Data Layer ═══ -->
  <rect x="30" y="560" width="1140" height="110" rx="12" fill="#1c2333" stroke="#4ade80" stroke-width="2"/>
  <text x="600" y="588" text-anchor="middle" fill="#4ade80" font-size="18" font-weight="700">Data Layer</text>

  <rect x="50" y="604" width="280" height="50" rx="8" fill="#1a2e1a" stroke="#4ade80" stroke-width="1.2"/>
  <text x="190" y="628" text-anchor="middle" fill="#86efac" font-size="14" font-weight="600">PostgreSQL</text>
  <text x="190" y="644" text-anchor="middle" fill="#9198a1" font-size="11">bookings, payments, reviews, users</text>

  <rect x="350" y="604" width="240" height="50" rx="8" fill="#1a2e1a" stroke="#fbbf24" stroke-width="1.2"/>
  <text x="470" y="628" text-anchor="middle" fill="#fbbf24" font-size="14" font-weight="600">File Storage</text>
  <text x="470" y="644" text-anchor="middle" fill="#9198a1" font-size="11">Gallery images (uploads/)</text>

  <rect x="610" y="604" width="240" height="50" rx="8" fill="#1a2e1a" stroke="#c084fc" stroke-width="1.2"/>
  <text x="730" y="628" text-anchor="middle" fill="#d8b4fe" font-size="14" font-weight="600">JWT Tokens</text>
  <text x="730" y="644" text-anchor="middle" fill="#9198a1" font-size="11">Access + refresh, localStorage</text>

  <rect x="870" y="604" width="290" height="50" rx="8" fill="#1a2e1a" stroke="#22d3ee" stroke-width="1.2"/>
  <text x="1015" y="628" text-anchor="middle" fill="#67e8f9" font-size="14" font-weight="600">Environment Config</text>
  <text x="1015" y="644" text-anchor="middle" fill="#9198a1" font-size="11">.env — DB, Square, TOTP secrets</text>

  <!-- ═══ Deploy ═══ -->
  <rect x="30" y="695" width="1140" height="60" rx="12" fill="#1c2333" stroke="#7d8590" stroke-width="1.5"/>
  <text x="600" y="733" text-anchor="middle" fill="#f0f6fc" font-size="15" font-weight="700">Astro SSG build  ·  Express on port 4321  ·  Tailwind CSS  ·  Square Web SDK (client-side tokenization)</text>

  <!-- ═══ Data Flow ═══ -->
  <rect x="30" y="780" width="1140" height="100" rx="12" fill="#1c2333" stroke="#30363d" stroke-width="1.5"/>
  <text x="600" y="808" text-anchor="middle" fill="#f0f6fc" font-size="15" font-weight="700">Key Data Flows</text>

  <circle cx="60" cy="834" r="5" fill="#fb923c"/>
  <text x="75" y="838" fill="#c9d1d9" font-size="12">Customer browses static Astro pages</text>

  <circle cx="400" cy="834" r="5" fill="#60a5fa"/>
  <text x="415" y="838" fill="#c9d1d9" font-size="12">React island calls /api/quotes for live pricing</text>

  <circle cx="60" cy="858" r="5" fill="#fbbf24"/>
  <text x="75" y="862" fill="#c9d1d9" font-size="12">Booking form → /api/bookings → PostgreSQL + email notification</text>

  <circle cx="660" cy="858" r="5" fill="#c084fc"/>
  <text x="675" y="862" fill="#c9d1d9" font-size="12">Admin login → JWT + TOTP 2FA → /manage dashboard</text>

  <text x="600" y="895" text-anchor="middle" fill="#7d8590" font-size="12">Astro  ·  React  ·  Node.js  ·  Express  ·  PostgreSQL  ·  Square  ·  Tailwind  ·  Google Places API</text>
</svg>